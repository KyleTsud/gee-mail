<html>
	<head>
		<title>DevLeague GeeMail Challenge</title>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <link href="https://fonts.googleapis.com/css?family=Sumana" rel="stylesheet">

    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser


        //current Date info 
        document.getElementById("today").innerHTML = Date();

        //inbox count
        document.addEventListener("click", function(){
        document.getElementById("menu").innerHTML="You Got Mail Homie!";
        });
 
        
        //recurring function (need work on this)
        window.setInterval(getNewMessage(), 500);
          function getNewMessage(){
            var now = new Date();
            return generateMessage(now);
          }
        
        //accessing prepopulated data stored in window.geemails variable
        var element = document.getElementById('main');

         console.log("my sender is: " + sender);
      
         // function mod(i) {
         //  var temp = document.getElementById("body" + i);
         //  temp.classList.toggle(".clicked");         }

        for (var i = 0; i < window.geemails.length; i++){
          var currentMessage = window.geemails[i];
          var sender = currentMessage.sender;
          var subject = currentMessage.subject;
          var date = currentMessage.date;
          var body = currentMessage.body;

       
          console.log(body);
        //visual list of mail message 
        var senderElement = document.createElement('p'); //create paragraph element
        senderElement.className = "buyme"; //set ID
        senderElement.innerHTML = "Sender: " + sender + " Subject: " + subject + " Date: " + date; //pulls vars sender, subject, etc
        element.appendChild(senderElement);

        //appends the paragraph element as a child of the main element
        var bodyElement = document.createElement('p'); 
        bodyElement.className = "howmuch"; 
        bodyElement.style.display = "none";
        bodyElement.innerHTML = body;
        senderElement.appendChild(bodyElement);
        

        }

        var showPrice = document.getElementsByClassName("buyme");
        for(var j = 0; j < showPrice.length; j++) {
          showPrice[j].addEventListener("click", secret);
        }
              
        function secret(){
         var priceShow = this.querySelectorAll('.howmuch')[0];
          console.log(this);
          if(priceShow.style.display === 'none'){
            priceShow.style.display = 'block';
          }else{
           priceShow.style.display = 'none';
        }

    } 

    };     

    </script>
	</head>
	
	<body>
		
		<header>
			<h1>GoogleMail</h1>
      <h3>Powered By { }</h3>
			<p id="today"></p>

		</header>

		<div id="menu">
				<table>
					<tr><td id="inbox"><strong></strong></td></tr>
				</table>
		</div>
    	
    <div id="main"> 
			    

    </div> 
    
    <div>
        <table>
          <tr><td><h5><img src="http://www.devleague.com/img/dev_league_emblem.png"></h5></td></tr>
        </table> 
    </div>    
    
  
		
		</body>
</html>